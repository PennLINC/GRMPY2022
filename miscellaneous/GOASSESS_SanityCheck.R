###################################################################################################
##########################         GRMPY - Generate NMF CSV's            ##########################
##########################               Robert Jirsaraie                ##########################
##########################        rjirsara@pennmedicine.upenn.edu        ##########################
##########################                 06/24/2018                    ##########################
###################################################################################################
#####  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  #####
###################################################################################################

###########################################################################################
##### Reads in the Previous and New Datasets & Create Subsets Just For Summery Scores #####
###########################################################################################

Old<-read.csv("/data/jux/BBL/studies/grmpy/rawPsycha1/diagnosis_wsmryvars_20180409.csv")
New<-read.csv("/data/jux/BBL/studies/grmpy/rawPsycha1/diagnosis_wsmryvars_20180622.csv")

rOld<-Old[,c(1,grep("dx",names(Old)))]
rNew<-New[,c(1,grep("dx",names(New)))]

########################################################################
##### Check the Number of People with Disorders from Both Datasets #####
########################################################################

colSums(rOld[2:19])
colSums(rNew[2:19])

###############################################################
##### Take the Row Sums to Identify Subjects Missing Data #####
###############################################################

rOld$Sum<-rowSums(rOld[2:19])
rNew$Sum<-rowSums(rNew[2:19])

mNew<-rNew[which(rNew$Sum == 0),]

mOld<-rOld[which(rOld$BBLID %in% mNew$BBLID),]

which(mOld$Sum <= 1)

length(which(mOld$Sum >= 1))

###################################################################################################
#####  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  #####
###################################################################################################


device = "pdf"
